/*! angular-dragtable - v0.1.0 - 2015-05-27 */
angular.module("dragtable",[]).value("mode","extension").value("version","v0.1.0").directive("draggable",["$window","$document",function(a,b){function c(c,d){function e(a){a.preventDefault(),c.origNode=a.target;var d=k(a);if(c.origNode=m(c.origNode,/T[DH]/),c.startCol=j(c.table,d.x),-1!==c.startCol){var e=i(c.table,!1);e.style.margin="0";var h=function(a,b){var c=i(a,!1);return p(a.rows,function(a){var d=a.cells[b],e=i(a,!1);a.offsetHeight&&(e.style.height=a.offsetHeight+"px");var f=i(d,!0);d.offsetWidth&&(f.style.width=d.offsetWidth+"px"),e.appendChild(f),c.appendChild(e)}),c};c.table.tHead&&e.appendChild(h(c.table.tHead,c.startCol)),p(c.table.tBodies,function(a){e.appendChild(h(a,c.startCol))}),c.table.tFoot&&e.appendChild(h(c.table.tFoot,c.startCol));var n=l(c.origNode,!0);e.style.position="absolute",e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.width=c.origNode.offsetWidth+"px",e.style.height=c.origNode.offsetHeight+"px",e.style.opacity=.7,c.addedNode=!1,c.tableContainer=c.table.parentNode||b.body,c.elNode=e,c.cursorStartX=d.x,c.cursorStartY=d.y,c.elStartLeft=parseInt(c.elNode.style.left,10),c.elStartTop=parseInt(c.elNode.style.top,10),isNaN(c.elStartLeft)&&(c.elStartLeft=0),isNaN(c.elStartTop)&&(c.elStartTop=0),c.elNode.style.zIndex=++c.zIndex,b.bind("mousemove",f),b.bind("mouseup",g)}}function f(a){var b=k(a),d=c.cursorStartX-b.x,e=c.cursorStartY-b.y;!c.addedNode&&d*d+e*e>c.dragRadius2&&(c.tableContainer.insertBefore(c.elNode,c.table),c.addedNode=!0);var f=c.elNode.style;f.left=c.elStartLeft+b.x-c.cursorStartX+"px",f.top=c.elStartTop+b.y-c.cursorStartY+"px"}function g(a){if(b.unbind("mousemove",f),b.unbind("mouseup",g),c.addedNode){c.tableContainer.removeChild(c.elNode);var d=k(a),e=l(c.table);if(!(d.y<e.y||d.y>e.y+c.table.offsetHeight)){var i=j(c.table,d.x);-1!==i&&i!==c.startCol&&(h(c.table,c.startCol,i),c.onDragEnd({$start:c.startCol,$target:i}),c.$apply())}}}function h(a,b,c){for(var d,e=a.rows.length;e--;){d=a.rows[e];var f=d.removeChild(d.cells[b]);c<d.cells.length?d.insertBefore(f,d.cells[c]):d.appendChild(f)}var g,h=a.tHead.rows[0].cells;for(g=0;g<h.length;g++)h[g].sorttable_columnindex=g}function i(a,b){var c=a.cloneNode(b);return c.className=a.className,p(a.style,function(b,d){null!==b&&("string"!=typeof b||0!==b.length)&&(c.style[d]=a.style[d])}),c}function j(a,b){var c,d=a.tHead.rows[0].cells;for(c=0;c<d.length;c++){var e=l(d[c]);if(e.x<=b&&b<=e.x+d[c].offsetWidth)return c}return-1}function k(a){return{x:a.pageX,y:a.pageY}}function l(c,d){var e=0,f=0;do{var g=a.getComputedStyle(c,"");if(d&&"relative"===g.position)break;if("fixed"===g.position){e+=parseInt(g.left,10),f+=parseInt(g.top,10),e+=b[0].body.scrollLeft,f+=b[0].body.scrollTop;break}e+=c.offsetLeft,f+=c.offsetTop,c=c.offsetParent}while(c);return{x:e,y:f}}function m(a,b){do{if(a.nodeName&&-1!==a.nodeName.search(b))return a;a=a.parentNode}while(a)}function n(a,b,c){var d;for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function o(a,b,c){var d,e=a.split("");for(d=0;d<e.length;d++)b.call(c,e[d],d,e)}function p(a,b,c){if(a){var d=Object,e=a instanceof Function;if(!e&&a.forEach instanceof Function)return void a.forEach(b,c);e?d=n:"string"==typeof a?d=o:"number"==typeof a.length&&(d=q),d(a,b,c)}}function q(a,b,c){var d;for(d=0;d<a.length;d++)b.call(c,a[d],d,a)}c.table=d[0],c.order=[],c.dragRadius2=100;for(var r=c.table.tHead.rows[0].cells,s=0;s<r.length;s++)c.order.push(s),r[s].onmousedown=e}return{restrict:"A",scope:{onDragEnd:"&"},link:c}}]);
//# sourceMappingURL=angular-dragtable.map
/*! angular-dragtable - v0.1.0 - 2015-05-27 */
angular.module("dragtable",[]).value("mode","extension").value("version","v0.1.0").directive("draggable",[function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;return l=function(a,b,c){var d,f,g,h,i,j;for(a.table=b[0],a.order=[],a.dragRadius2=100,d=a.table.tHead.rows[0].cells,i=d.length,j=[],g=0,h=i.length;h>g;g++)f=i[g],a.order.push(f),j.push(d[f].onmousedown=e);return j},e=function(b){var e,i,l,m,n,o,p,q,r;i=b,i.preventDefault(),q=void 0,r=void 0,scope.origNode=i.target,n=f(i),scope.origNode=h(scope.origNode,/T[DH]/),scope.startCol=g(scope.table,n.x),-1!==scope.startCol&&(l=k(scope.table,!1),l.style.margin="0",e=function(a,b){var c;return c=k(a,!1),j(a.rows,function(a){var d,e,f;d=a.cells[b],f=k(a,!1),a.offsetHeight&&(f.style.height=a.offsetHeight+"px"),e=k(d,!0),d.offsetWidth&&(e.style.width=d.offsetWidth+"px"),f.appendChild(e),c.appendChild(f)}),c},scope.table.tHead&&l.appendChild(e(scope.table.tHead,scope.startCol)),j(scope.table.tBodies,function(a){l.appendChild(e(a,scope.startCol))}),scope.table.tFoot&&l.appendChild(e(scope.table.tFoot,scope.startCol)),m=a(scope.origNode,!0),l.style.position="absolute",l.style.left=m.x+"px",l.style.top=m.y+"px",l.style.width=scope.origNode.offsetWidth+"px",l.style.height=scope.origNode.offsetHeight+"px",l.style.opacity=.7,scope.addedNode=!1,scope.tableContainer=scope.table.parentNode||$document.body,scope.elNode=l,scope.cursorStartX=n.x,scope.cursorStartY=n.y,scope.elStartLeft=parseInt(scope.elNode.style.left,10),scope.elStartTop=parseInt(scope.elNode.style.top,10),isNaN(scope.elStartLeft)&&(scope.elStartLeft=0),isNaN(scope.elStartTop)&&(scope.elStartTop=0),scope.elNode.style.zIndex=++scope.zIndex,o=i.screenX-q,p=i.screenY-r,$document.bind("mousemove",d),$document.bind("mouseup",c))},d=function(a){var b,c,d,e,g;d=a,e=f(d),b=scope.cursorStartX-e.x,c=scope.cursorStartY-e.y,!scope.addedNode&&b*b+c*c>scope.dragRadius2&&(scope.tableContainer.insertBefore(scope.elNode,scope.table),scope.addedNode=!0),g=scope.elNode.style,g.left=scope.elStartLeft+e.x-scope.cursorStartX+"px",g.top=scope.elStartTop+e.y-scope.cursorStartY+"px"},c=function(b){var e,h,i,j;e=b,$document.unbind("mousemove",d),$document.unbind("mouseup",c),scope.addedNode&&(scope.tableContainer.removeChild(scope.elNode),h=f(e),i=a(scope.table),h.y<i.y||h.y>i.y+scope.table.offsetHeight||(j=g(scope.table,h.x),-1!==j&&j!==scope.startCol&&(m(scope.table,scope.startCol,j),scope.$eval(attrs.onDragEnd,{$start:scope.startCol,$target:j}),console.log("This might not work and needs to be fixed."))))},m=function(a,b,c){var d,e,f,g,h,i;for(h=void 0,d=void 0,f=a.rows.length;f--;)h=a.rows[f],i=h.removeChild(h.cells[b]),c<h.cells.length?h.insertBefore(i,h.cells[c]):h.appendChild(i);for(e=a.tHead.rows[0].cells,g=void 0,g=0;g<e.length;)e[g].sorttable_columnindex=g,g++},k=function(a,b){var c;return c=a.cloneNode(b),c.className=a.className,j(a.style,function(b,d,e){null!==b&&("string"!=typeof b||0!==b.length)&&(c.style[d]=a.style[d])}),c},g=function(b,c){var d,e,f;for(d=b.tHead.rows[0].cells,e=void 0,e=0;e<d.length;){if(f=a(d[e]),f.x<=c&&c<=f.x+d[e].offsetWidth)return e;e++}return-1},f=function(a){return{x:a.pageX,y:a.pageY}},a=function(a,b){var c,d,e;for(d=0,e=0;;){if(c=$window.getComputedStyle(a,""),b&&"relative"===c.position)break;if("fixed"===c.position){d+=parseInt(c.left,10),e+=parseInt(c.top,10),d+=$document[0].body.scrollLeft,e+=$document[0].body.scrollTop;break}if(d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent,!a)break}return{x:d,y:e}},h=function(a,b){for(;;){if(a.nodeName&&-1!==a.nodeName.search(b))return a;if(a=a.parentNode,!a)break}},i=function(a,b,c){var d;d=void 0;for(d in a)d=d,a.hasOwnProperty(d)&&b.call(c,a[d],d,a)},n=function(a,b,c){var d,e;for(d=string.split(""),e=void 0,e=0;e<d.length;)b.call(c,d[e],e,d),e++},j=function(a,c,d){var e,f;if(a){if(f=Object,e=a instanceof Function,!e&&a.forEach instanceof Function)return void a.forEach(c,d);e?f=i:"string"==typeof a?f=n:"number"==typeof a.length&&(f=b),f(a,c,d)}},b=function(a,b,c){var d;for(d=void 0,d=0;d<a.length;)b.call(c,a[d],d,a),d++},{restrict:"A",link:l}}]);
//# sourceMappingURL=angular-dragtable.map
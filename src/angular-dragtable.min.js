/*! angular-dragtable - v0.1.0 - 2015-05-27 */
angular.module("dragtable",[]).value("mode","extension").value("version","v0.1.0").directive("draggable",[function(){var a;return a=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(h=function(b){var c,e,h,l,o,p,q,r,s;e=b,e.preventDefault(),r=void 0,s=void 0,a.origNode=e.target,o=i(e),a.origNode=k(a.origNode,/T[DH]/),a.startCol=j(a.table,o.x),-1!==a.startCol&&(h=n(a.table,!1),h.style.margin="0",c=function(a,b){var c;return c=n(a,!1),m(a.rows,function(a){var d,e,f;d=a.cells[b],f=n(a,!1),a.offsetHeight&&(f.style.height=a.offsetHeight+"px"),e=n(d,!0),d.offsetWidth&&(e.style.width=d.offsetWidth+"px"),f.appendChild(e),c.appendChild(f)}),c},a.table.tHead&&h.appendChild(c(a.table.tHead,a.startCol)),m(a.table.tBodies,function(b){h.appendChild(c(b,a.startCol))}),a.table.tFoot&&h.appendChild(c(a.table.tFoot,a.startCol)),l=d(a.origNode,!0),h.style.position="absolute",h.style.left=l.x+"px",h.style.top=l.y+"px",h.style.width=a.origNode.offsetWidth+"px",h.style.height=a.origNode.offsetHeight+"px",h.style.opacity=.7,a.addedNode=!1,a.tableContainer=a.table.parentNode||$document.body,a.elNode=h,a.cursorStartX=o.x,a.cursorStartY=o.y,a.elStartLeft=parseInt(a.elNode.style.left,10),a.elStartTop=parseInt(a.elNode.style.top,10),isNaN(a.elStartLeft)&&(a.elStartLeft=0),isNaN(a.elStartTop)&&(a.elStartTop=0),a.elNode.style.zIndex=++a.zIndex,p=e.screenX-r,q=e.screenY-s,$document.bind("mousemove",g),$document.bind("mouseup",f))},g=function(b){var c,d,e,f,g;e=b,f=i(e),c=a.cursorStartX-f.x,d=a.cursorStartY-f.y,!a.addedNode&&c*c+d*d>a.dragRadius2&&(a.tableContainer.insertBefore(a.elNode,a.table),a.addedNode=!0),g=a.elNode.style,g.left=a.elStartLeft+f.x-a.cursorStartX+"px",g.top=a.elStartTop+f.y-a.cursorStartY+"px"},f=function(b){var e,h,k,l;e=b,$document.unbind("mousemove",g),$document.unbind("mouseup",f),a.addedNode&&(a.tableContainer.removeChild(a.elNode),h=i(e),k=d(a.table),h.y<k.y||h.y>k.y+a.table.offsetHeight||(l=j(a.table,h.x),-1!==l&&l!==a.startCol&&(s(a.table,a.startCol,l),a.$eval(c.onDragEnd,{$start:a.startCol,$target:l}),console.log("This might not work and needs to be fixed."))))},s=function(a,b,c){var d,e,f,g,h,i;for(h=void 0,d=void 0,f=a.rows.length;f--;)h=a.rows[f],i=h.removeChild(h.cells[b]),c<h.cells.length?h.insertBefore(i,h.cells[c]):h.appendChild(i);for(e=a.tHead.rows[0].cells,g=void 0,g=0;g<e.length;)e[g].sorttable_columnindex=g,g++},n=function(a,b){var c;return c=a.cloneNode(b),c.className=a.className,m(a.style,function(b,d,e){null!==b&&("string"!=typeof b||0!==b.length)&&(c.style[d]=a.style[d])}),c},j=function(a,b){var c,e,f;for(c=a.tHead.rows[0].cells,e=void 0,e=0;e<c.length;){if(f=d(c[e]),f.x<=b&&b<=f.x+c[e].offsetWidth)return e;e++}return-1},i=function(a){return{x:a.pageX,y:a.pageY}},d=function(a,b){var c,d,e;for(d=0,e=0;;){if(c=$window.getComputedStyle(a,""),b&&"relative"===c.position)break;if("fixed"===c.position){d+=parseInt(c.left,10),e+=parseInt(c.top,10),d+=$document[0].body.scrollLeft,e+=$document[0].body.scrollTop;break}if(d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent,!a)break}return{x:d,y:e}},k=function(a,b){for(;;){if(a.nodeName&&-1!==a.nodeName.search(b))return a;if(a=a.parentNode,!a)break}},l=function(a,b,c){var d;d=void 0;for(d in a)d=d,a.hasOwnProperty(d)&&b.call(c,a[d],d,a)},u=function(a,b,c){var d,e;for(d=string.split(""),e=void 0,e=0;e<d.length;)b.call(c,d[e],e,d),e++},m=function(a,b,c){var d,f;if(a){if(f=Object,d=a instanceof Function,!d&&a.forEach instanceof Function)return void a.forEach(b,c);d?f=l:"string"==typeof a?f=u:"number"==typeof a.length&&(f=e),f(a,b,c)}},e=function(a,b,c){var d;for(d=void 0,d=0;d<a.length;)b.call(c,a[d],d,a),d++},a.table=b[0],a.order=[],a.dragRadius2=100,o=a.table.tHead.rows[0].cells,t=o.length,q=0,r=t.length;r>q;q++)p=t[q],a.order.push(p),o[p].onmousedown=h}}]);
//# sourceMappingURL=angular-dragtable.map